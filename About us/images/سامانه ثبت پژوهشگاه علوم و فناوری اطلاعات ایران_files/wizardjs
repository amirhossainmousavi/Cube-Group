function SmartWizard(n,t){this.target=n;this.options=t;this.curStepIdx=t.selected;this.steps=$(n).children("ul").children("li").children("a");this.contentWidth=0;this.msgBox=$('<div class="msgBox"><div class="content"><\/div><a href="#" class="close">X<\/a><\/div>');this.elmStepContainer=$("<div><\/div>").addClass("stepContainer");this.loader=$("<div>Loading<\/div>").addClass("loader");this.buttons={next:$("<a>"+t.labelNext+"<\/a>").attr("href","#").addClass("buttonNext"),previous:$("<a>"+t.labelPrevious+"<\/a>").attr("href","#").addClass("buttonPrevious"),finish:$("<a>"+t.labelFinish+"<\/a>").attr("href","#").addClass("buttonFinish")};var e=function(t){var i=$("<div><\/div>").addClass("actionBar"),u,f;i.append(t.msgBox);$(".close",t.msgBox).click(function(){return t.msgBox.fadeOut("normal"),!1});u=t.target.children("div");t.target.children("ul").length==0&&(f=$("<ul/>"),n.prepend(f),u.each(function(n,t){var e=$(t).first().children(".StepTitle").text(),i=$(t).attr("id"),r,u;i==undefined&&(i="step-"+(n+1),$(t).attr("id",i));r=$("<span/>").addClass("stepDesc").text(e);u=$("<li><\/li>").append($("<a><\/a>").attr("href","#"+i).append($("<label><\/label>").addClass("stepNumber").text(n+1)).append(r));f.append(u)}),t.steps=$(n).children("ul").children("li").children("a"));t.target.children("ul").addClass("anchor");u.addClass("content");t.options.errorSteps&&t.options.errorSteps.length>0&&$.each(t.options.errorSteps,function(n,i){t.setError({stepnum:i,iserror:!0})});t.elmStepContainer.append(u);i.append(t.loader);t.target.append(t.elmStepContainer);t.options.includeFinishButton&&i.append(t.buttons.finish);i.append(t.buttons.next).append(t.buttons.previous);t.target.append(i);this.contentWidth=t.elmStepContainer.width();$(t.buttons.next).click(function(){return t.goForward(),!1});$(t.buttons.previous).click(function(){return t.goBackward(),!1});$(t.buttons.finish).click(function(){var i,n;if(!$(this).hasClass("buttonDisabled"))if($.isFunction(t.options.onFinish)){if(i={fromStep:t.curStepIdx+1},!t.options.onFinish.call(this,$(t.steps),i))return!1}else n=t.target.parents("form"),n&&n.length&&n.submit();return!1});$(t.steps).bind("click",function(){if(t.steps.index(this)==t.curStepIdx)return!1;var n=t.steps.index(this),i=t.steps.eq(n).attr("isDone")-0;return i==1&&r(t,n),!1});t.options.keyNavigation&&$(document).keyup(function(n){n.which==39?t.goForward():n.which==37&&t.goBackward()});o(t);r(t,t.curStepIdx)},o=function(n){n.options.enableAllSteps?($(n.steps,n.target).removeClass("selected").removeClass("disabled").addClass("done"),$(n.steps,n.target).attr("isDone",1)):($(n.steps,n.target).removeClass("selected").removeClass("done").addClass("disabled"),$(n.steps,n.target).attr("isDone",0));$(n.steps,n.target).each(function(t){$($(this).attr("href").replace(/^.+#/,"#"),n.target).hide();$(this).attr("rel",t+1)})},i=function(n,t){return $($(t,n.target).attr("href").replace(/^.+#/,"#"),n.target)},r=function(n,t){var u=n.steps.eq(t),e=n.options.contentURL,o=n.options.contentURLData,h=u.data("hasContent"),s=t+1,r;e&&e.length>0?n.options.contentCache&&h?f(n,t):(r={url:e,type:n.options.ajaxType,data:{step_number:s},dataType:"text",beforeSend:function(){n.loader.show()},error:function(){n.loader.hide()},success:function(r){n.loader.hide();r&&r.length>0&&(u.data("hasContent",!0),i(n,u).html(r),f(n,t))}},o&&(r=$.extend(r,o(s))),$.ajax(r)):f(n,t)},f=function(n,t){var f=n.steps.eq(t),r=n.steps.eq(n.curStepIdx),h,s;if(t!=n.curStepIdx&&$.isFunction(n.options.onLeaveStep)&&(h={fromStep:n.curStepIdx+1,toStep:t+1},!n.options.onLeaveStep.call(n,$(r),h)))return!1;if(n.elmStepContainer.height(i(n,f).outerHeight()),s=n.curStepIdx,n.curStepIdx=t,n.options.transitionEffect=="slide")i(n,r).slideUp("fast",function(){i(n,f).slideDown("fast");u(n,r,f)});else if(n.options.transitionEffect=="fade")i(n,r).fadeOut("fast",function(){i(n,f).fadeIn("fast");u(n,r,f)});else if(n.options.transitionEffect=="slideleft"){var c=0,e=null,c=null,o=0;t>s?(e=n.elmStepContainer.width()+10,nextElmLeft2=0,o=0-i(n,r).outerWidth()):(e=20-i(n,f).outerWidth(),nextElmLeft2=0,o=10+i(n,r).outerWidth());t==s?(e=$($(f,n.target).attr("href"),n.target).outerWidth()+20,nextElmLeft2=0,o=0-$($(r,n.target).attr("href"),n.target).outerWidth()):$($(r,n.target).attr("href"),n.target).animate({left:o},"fast",function(){$($(r,n.target).attr("href"),n.target).hide()});i(n,f).css("left",e).show().animate({left:nextElmLeft2},"fast",function(){u(n,r,f)})}else i(n,r).hide(),i(n,f).show(),u(n,r,f);return!0},u=function(n,t,i){var u,r;if($(t,n.target).removeClass("selected"),$(t,n.target).addClass("done"),$(i,n.target).removeClass("disabled"),$(i,n.target).removeClass("done"),$(i,n.target).addClass("selected"),$(i,n.target).attr("isDone",1),s(n),$.isFunction(n.options.onShowStep)&&(u={fromStep:parseInt($(t).attr("rel")),toStep:parseInt($(i).attr("rel"))},!n.options.onShowStep.call(this,$(i),u)))return!1;if(n.options.noForwardJumping)for(r=n.curStepIdx+2;r<=n.steps.length;r++)n.disableStep(r)},s=function(n){n.options.cycleSteps||(0>=n.curStepIdx?($(n.buttons.previous).addClass("buttonDisabled"),n.options.hideButtonsOnDisabled&&$(n.buttons.previous).hide()):($(n.buttons.previous).removeClass("buttonDisabled"),n.options.hideButtonsOnDisabled&&$(n.buttons.previous).show()),n.steps.length-1<=n.curStepIdx?($(n.buttons.next).addClass("buttonDisabled"),n.options.hideButtonsOnDisabled&&$(n.buttons.next).hide()):($(n.buttons.next).removeClass("buttonDisabled"),n.options.hideButtonsOnDisabled&&$(n.buttons.next).show()));n.options.includeFinishButton&&(!n.steps.hasClass("disabled")||n.options.enableFinishButton?($(n.buttons.finish).removeClass("buttonDisabled"),n.options.hideButtonsOnDisabled&&$(n.buttons.finish).show()):($(n.buttons.finish).addClass("buttonDisabled"),n.options.hideButtonsOnDisabled&&$(n.buttons.finish).hide()))};SmartWizard.prototype.goForward=function(){var n=this.curStepIdx+1;if(this.steps.length<=n){if(!this.options.cycleSteps)return!1;n=0}r(this,n);$("html, body").animate({scrollTop:0},"slow")};SmartWizard.prototype.goBackward=function(){var n=this.curStepIdx-1;if(0>n){if(!this.options.cycleSteps)return!1;n=this.steps.length-1}r(this,n);$("html, body").animate({scrollTop:0},"slow")};SmartWizard.prototype.goToStep=function(n){var t=n-1;t>=0&&t<this.steps.length&&r(this,t);$("html, body").animate({scrollTop:0},"slow")};SmartWizard.prototype.enableStep=function(n){var t=n-1,i;if(t==this.curStepIdx||t<0||t>=this.steps.length)return!1;i=this.steps.eq(t);$(i,this.target).attr("isDone",1);$(i,this.target).removeClass("disabled").removeClass("selected").addClass("done")};SmartWizard.prototype.disableStep=function(n){var t=n-1,i;if(t==this.curStepIdx||t<0||t>=this.steps.length)return!1;i=this.steps.eq(t);$(i,this.target).attr("isDone",0);$(i,this.target).removeClass("done").removeClass("selected").addClass("disabled")};SmartWizard.prototype.currentStep=function(){return this.curStepIdx+1};SmartWizard.prototype.showMessage=function(n){$(".content",this.msgBox).html(n);this.msgBox.show()};SmartWizard.prototype.hideMessage=function(){this.msgBox.fadeOut("normal")};SmartWizard.prototype.showError=function(n){this.setError(n,!0)};SmartWizard.prototype.hideError=function(n){this.setError(n,!1)};SmartWizard.prototype.setError=function(n,t){typeof n=="object"&&(t=n.iserror,n=n.stepnum);t?$(this.steps.eq(n-1),this.target).addClass("error"):$(this.steps.eq(n-1),this.target).removeClass("error")};SmartWizard.prototype.fixHeight=function(){var n=0,r=this.steps.eq(this.curStepIdx),t=i(this,r);t.children().each(function(){$(this).is(":visible")&&(n+=$(this).outerHeight())});t.height(n+5);this.elmStepContainer.height(n+20)};e(this)}(function(n){n.fn.smartWizard=function(t){var r=arguments,i=undefined,u=this.each(function(){var u=n(this).data("smartWizard"),f;if(typeof t!="object"&&t&&u){if(typeof SmartWizard.prototype[t]=="function")return i=SmartWizard.prototype[t].apply(u,Array.prototype.slice.call(r,1));n.error("Method "+t+" does not exist on jQuery.smartWizard")}else f=n.extend({},n.fn.smartWizard.defaults,t||{}),u||(u=new SmartWizard(n(this),f),n(this).data("smartWizard",u))});return i===undefined?u:i};n.fn.smartWizard.defaults={selected:0,keyNavigation:!0,enableAllSteps:!1,transitionEffect:"fade",contentURL:null,contentCache:!0,cycleSteps:!1,enableFinishButton:!1,hideButtonsOnDisabled:!1,errorSteps:[],labelNext:"Next",labelPrevious:"Previous",labelFinish:"Finish",noForwardJumping:!1,ajaxType:"POST",onLeaveStep:null,onShowStep:null,onFinish:null,includeFinishButton:!0}})(jQuery);var selectdStep=0,FormWizard=function(){var t=$("#wizard"),c=$("#myWizardForm"),i=function(){t.smartWizard({selected:selectdStep,keyNavigation:!1,onLeaveStep:e,onShowStep:f});n();r()},n=function(n){(typeof n=="undefined"||n=="")&&(n=1);numberOfSteps=$(".swMain > ul > li").length;var t=Math.floor(100/numberOfSteps*n);$(".step-bar").css("width",t+"%")},r=function(){$.validator.addMethod("cardExpiry",function(){return $("#card_expiry_mm").val()!=""&&$("#card_expiry_yyyy").val()!=""?!0:!1},"Please select a month and year");$.validator.setDefaults({errorElement:"span",errorClass:"help-block",errorPlacement:function(n,t){t.attr("type")=="radio"||t.attr("type")=="checkbox"?n.insertAfter($(t).closest(".form-group").children("div").children().last()):t.attr("name")=="card_expiry_mm"||t.attr("name")=="card_expiry_yyyy"?n.appendTo($(t).closest(".form-group").children("div")):n.insertAfter(t)},ignore:":hidden",rules:{username:{minlength:2,required:!0},email:{required:!0,email:!0},password:{minlength:6,required:!0},password_again:{required:!0,minlength:5,equalTo:"#password"},full_name:{required:!0,minlength:2},phone:{required:!0},gender:{required:!0},address:{required:!0},city:{required:!0},country:{required:!0},card_name:{required:!0},card_number:{minlength:16,maxlength:16,required:!0},card_cvc:{digits:!0,required:!0,minlength:3,maxlength:4},card_expiry_yyyy:"cardExpiry",payment:{required:!0,minlength:1}},messages:{firstname:"Please specify your first name"},highlight:function(n){$(n).closest(".help-block").removeClass("valid");$(n).closest(".form-group").removeClass("has-success").addClass("has-error").find(".symbol").removeClass("ok").addClass("required")},unhighlight:function(n){$(n).closest(".form-group").removeClass("has-error")},success:function(n,t){n.addClass("help-block valid");$(t).closest(".form-group").removeClass("has-error").addClass("has-success").find(".symbol").removeClass("required").addClass("ok")}})},u=function(){},f=function(n,i){$(".next-step").unbind("click").click(function(n){n.preventDefault();t.smartWizard("goForward")});$(".back-step").unbind("click").click(function(n){n.preventDefault();t.smartWizard("goBackward")});$(".finish-step").unbind("click").click(function(t){t.preventDefault();o(n,i)})},e=function(n,t){return s(t.fromStep,t.toStep)},o=function(){h()&&(alert("form submit function"),$(".anchor").children("li").last().children("a").removeClass("wait").removeClass("selected").addClass("done"))},s=function(t,i){var r=!1;return numberOfSteps>i&&i>t?(n(i),r=!0,!0):i<t?($(".anchor").children("li:nth-child("+t+")").children("a").addClass("wait"),n(i),!0):($(".anchor").children("li:nth-child("+t+")").children("a").removeClass("wait"),u(),n(i),!0)},h=function(){return!0};return{init:function(){i()}}}()